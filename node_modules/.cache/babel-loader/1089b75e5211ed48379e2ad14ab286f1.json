{"ast":null,"code":"var _jsxFileName = \"/home/allan/Development/code/phase-2/Shoping-card-react/src/components/Context/ContextProvider.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useReducer } from \"react\";\nimport allProducts from \"../../Data\";\nimport offerCode from \"../../Offer\";\nimport { sendPrice } from \"../../Offer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  allProducts,\n  favorites: [],\n  basket: [],\n  totalPrice: 0,\n  totalPriceAfterOffer: 0,\n  offerPrice: 0,\n  totalPriceFainal: 0,\n  isFavorite: false,\n  isEnterOfferCode: false,\n  offerMessage: \"\"\n};\n\nconst sumPrice = (items, isOffer) => {\n  const totalPrice = items.reduce((totalPrice, product) => {\n    return totalPrice + product.price * product.count;\n  }, 0);\n\n  if (isOffer) {\n    const offerPrice = totalPrice * offerCode.disCount / 100;\n    const totalPriceAfterOffer = totalPrice - offerPrice;\n    return {\n      totalPrice,\n      offerPrice,\n      totalPriceAfterOffer,\n      ...sumPriceWithSend(totalPrice, offerPrice)\n    };\n  } else {\n    return {\n      totalPrice,\n      ...sumPriceWithSend(totalPrice)\n    };\n  }\n}; // calc Price With shopping cost\n\n\nconst sumPriceWithSend = function (totalPrice) {\n  let offerPrice = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let totalPriceFainal = null;\n\n  if (totalPrice - offerPrice <= 100000) {\n    totalPriceFainal = totalPrice + sendPrice - offerPrice;\n  } else {\n    totalPriceFainal = totalPrice - offerPrice;\n  }\n\n  return {\n    totalPriceFainal\n  };\n};\n\nconst reduce = (state, action) => {\n  switch (action.type) {\n    case \"ADD_FAVORITE\":\n      {\n        state.allProducts.forEach(product => {\n          if (product.id === action.payload) {\n            product.isInterest = !product.isInterest;\n            state.favorites = allProducts.filter(product => product.isInterest);\n            state.isFavorite = true;\n          }\n        });\n        return { ...state\n        };\n      }\n\n    case \"REMOVE_ALL_FAVORITE\":\n      {\n        state.favorites = [];\n        state.allProducts.forEach(product => {\n          product.isInterest = false;\n        });\n        return { ...state\n        };\n      }\n\n    case \"ADD_TO_BASKET\":\n      {\n        const hasProduct = state.basket.some(product => product.id === action.payload);\n\n        if (!hasProduct) {\n          const mainItem = state.allProducts.find(product => product.id === action.payload);\n          state.basket.push(mainItem);\n        }\n\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    case \"REMOVE_FROM_BASKET\":\n      {\n        const indexDelete = state.basket.findIndex(product => product.id === action.payload);\n        state.basket[indexDelete].count = 1;\n        state.basket = state.basket.filter(product => product.id !== action.payload);\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    case \"INCREASE\":\n      {\n        const indexPlus = state.basket.findIndex(product => product.id === action.payload);\n        state.basket[indexPlus].count++;\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    case \"DECREASE\":\n      {\n        const indexMinus = state.basket.findIndex(product => product.id === action.payload);\n\n        if (state.basket[indexMinus].count > 1) {\n          state.basket[indexMinus].count--;\n        }\n\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    case \"EMPTY_BASKET\":\n      {\n        state.basket = state.basket.forEach(product => product.count = 1);\n        state.basket = [];\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    case \"REMOVE_CLASS\":\n      {\n        state.isFavorite = false;\n        return { ...state\n        };\n      }\n\n    case \"OFFER_CODE\":\n      {\n        if (offerCode.code === action.payload) {\n          state.isEnterOfferCode = true;\n          state.offerMessage = \"تخفیف اعمال شد\";\n        } else {\n          state.offerMessage = \"کد وارد شده صحیح نیست\";\n        }\n\n        return { ...state,\n          ...sumPrice(state.basket, state.isEnterOfferCode)\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const ProductContext = /*#__PURE__*/createContext();\nexport const ProductDispath = /*#__PURE__*/createContext();\nexport default function ContextProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispath] = useReducer(reduce, initialState);\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: {\n      state\n    },\n    children: /*#__PURE__*/_jsxDEV(ProductDispath.Provider, {\n      value: {\n        dispath\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContextProvider, \"zQ3mCpM2qCbtWZknvdYb6bVqR3k=\");\n\n_c = ContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"sources":["/home/allan/Development/code/phase-2/Shoping-card-react/src/components/Context/ContextProvider.jsx"],"names":["React","createContext","useReducer","allProducts","offerCode","sendPrice","initialState","favorites","basket","totalPrice","totalPriceAfterOffer","offerPrice","totalPriceFainal","isFavorite","isEnterOfferCode","offerMessage","sumPrice","items","isOffer","reduce","product","price","count","disCount","sumPriceWithSend","state","action","type","forEach","id","payload","isInterest","filter","hasProduct","some","mainItem","find","push","indexDelete","findIndex","indexPlus","indexMinus","code","ProductContext","ProductDispath","ContextProvider","children","dispath"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,QAAiD,OAAjD;AACA,OAAOC,WAAP,MAAwB,YAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,SAAT,QAA0B,aAA1B;;AAEA,MAAMC,YAAY,GAAG;AACnBH,EAAAA,WADmB;AAEnBI,EAAAA,SAAS,EAAE,EAFQ;AAGnBC,EAAAA,MAAM,EAAE,EAHW;AAInBC,EAAAA,UAAU,EAAE,CAJO;AAKnBC,EAAAA,oBAAoB,EAAE,CALH;AAMnBC,EAAAA,UAAU,EAAE,CANO;AAOnBC,EAAAA,gBAAgB,EAAE,CAPC;AAQnBC,EAAAA,UAAU,EAAE,KARO;AASnBC,EAAAA,gBAAgB,EAAE,KATC;AAUnBC,EAAAA,YAAY,EAAE;AAVK,CAArB;;AAaA,MAAMC,QAAQ,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AACnC,QAAMT,UAAU,GAAGQ,KAAK,CAACE,MAAN,CAAa,CAACV,UAAD,EAAaW,OAAb,KAAyB;AACvD,WAAOX,UAAU,GAAGW,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACE,KAA5C;AACD,GAFkB,EAEhB,CAFgB,CAAnB;;AAIA,MAAIJ,OAAJ,EAAa;AACX,UAAMP,UAAU,GAAIF,UAAU,GAAGL,SAAS,CAACmB,QAAxB,GAAoC,GAAvD;AACA,UAAMb,oBAAoB,GAAGD,UAAU,GAAGE,UAA1C;AAEA,WAAO;AACLF,MAAAA,UADK;AAELE,MAAAA,UAFK;AAGLD,MAAAA,oBAHK;AAIL,SAAGc,gBAAgB,CAACf,UAAD,EAAaE,UAAb;AAJd,KAAP;AAMD,GAVD,MAUO;AACL,WAAO;AAAEF,MAAAA,UAAF;AAAc,SAAGe,gBAAgB,CAACf,UAAD;AAAjC,KAAP;AACD;AACF,CAlBD,C,CAoBA;;;AACA,MAAMe,gBAAgB,GAAG,UAACf,UAAD,EAAgC;AAAA,MAAnBE,UAAmB,uEAAN,CAAM;AACvD,MAAIC,gBAAgB,GAAG,IAAvB;;AAEA,MAAIH,UAAU,GAAGE,UAAb,IAA2B,MAA/B,EAAwC;AACtCC,IAAAA,gBAAgB,GAAGH,UAAU,GAAGJ,SAAb,GAAyBM,UAA5C;AACD,GAFD,MAEO;AACLC,IAAAA,gBAAgB,GAAGH,UAAU,GAAGE,UAAhC;AACD;;AAED,SAAO;AAAEC,IAAAA;AAAF,GAAP;AACD,CAVD;;AAYA,MAAMO,MAAM,GAAG,CAACM,KAAD,EAAQC,MAAR,KAAmB;AAChC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,cAAL;AAAqB;AACnBF,QAAAA,KAAK,CAACtB,WAAN,CAAkByB,OAAlB,CAA2BR,OAAD,IAAa;AACrC,cAAIA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OAA1B,EAAmC;AACjCV,YAAAA,OAAO,CAACW,UAAR,GAAqB,CAACX,OAAO,CAACW,UAA9B;AACAN,YAAAA,KAAK,CAAClB,SAAN,GAAkBJ,WAAW,CAAC6B,MAAZ,CAAoBZ,OAAD,IAAaA,OAAO,CAACW,UAAxC,CAAlB;AACAN,YAAAA,KAAK,CAACZ,UAAN,GAAmB,IAAnB;AACD;AACF,SAND;AAOA,eAAO,EACL,GAAGY;AADE,SAAP;AAGD;;AACD,SAAK,qBAAL;AAA4B;AAC1BA,QAAAA,KAAK,CAAClB,SAAN,GAAkB,EAAlB;AACAkB,QAAAA,KAAK,CAACtB,WAAN,CAAkByB,OAAlB,CAA2BR,OAAD,IAAa;AACrCA,UAAAA,OAAO,CAACW,UAAR,GAAqB,KAArB;AACD,SAFD;AAIA,eAAO,EACL,GAAGN;AADE,SAAP;AAGD;;AACD,SAAK,eAAL;AAAsB;AACpB,cAAMQ,UAAU,GAAGR,KAAK,CAACjB,MAAN,CAAa0B,IAAb,CAChBd,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADlB,CAAnB;;AAGA,YAAI,CAACG,UAAL,EAAiB;AACf,gBAAME,QAAQ,GAAGV,KAAK,CAACtB,WAAN,CAAkBiC,IAAlB,CACdhB,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADpB,CAAjB;AAGAL,UAAAA,KAAK,CAACjB,MAAN,CAAa6B,IAAb,CAAkBF,QAAlB;AACD;;AAED,eAAO,EACL,GAAGV,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD,SAAK,oBAAL;AAA2B;AACzB,cAAMwB,WAAW,GAAGb,KAAK,CAACjB,MAAN,CAAa+B,SAAb,CACjBnB,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADjB,CAApB;AAGAL,QAAAA,KAAK,CAACjB,MAAN,CAAa8B,WAAb,EAA0BhB,KAA1B,GAAkC,CAAlC;AACAG,QAAAA,KAAK,CAACjB,MAAN,GAAeiB,KAAK,CAACjB,MAAN,CAAawB,MAAb,CACZZ,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADtB,CAAf;AAIA,eAAO,EACL,GAAGL,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD,SAAK,UAAL;AAAiB;AACf,cAAM0B,SAAS,GAAGf,KAAK,CAACjB,MAAN,CAAa+B,SAAb,CACfnB,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADnB,CAAlB;AAGAL,QAAAA,KAAK,CAACjB,MAAN,CAAagC,SAAb,EAAwBlB,KAAxB;AAEA,eAAO,EACL,GAAGG,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD,SAAK,UAAL;AAAiB;AACf,cAAM2B,UAAU,GAAGhB,KAAK,CAACjB,MAAN,CAAa+B,SAAb,CAChBnB,OAAD,IAAaA,OAAO,CAACS,EAAR,KAAeH,MAAM,CAACI,OADlB,CAAnB;;AAGA,YAAIL,KAAK,CAACjB,MAAN,CAAaiC,UAAb,EAAyBnB,KAAzB,GAAiC,CAArC,EAAwC;AACtCG,UAAAA,KAAK,CAACjB,MAAN,CAAaiC,UAAb,EAAyBnB,KAAzB;AACD;;AAED,eAAO,EACL,GAAGG,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD,SAAK,cAAL;AAAqB;AACnBW,QAAAA,KAAK,CAACjB,MAAN,GAAeiB,KAAK,CAACjB,MAAN,CAAaoB,OAAb,CAAsBR,OAAD,IAAcA,OAAO,CAACE,KAAR,GAAgB,CAAnD,CAAf;AACAG,QAAAA,KAAK,CAACjB,MAAN,GAAe,EAAf;AACA,eAAO,EACL,GAAGiB,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD,SAAK,cAAL;AAAqB;AACnBW,QAAAA,KAAK,CAACZ,UAAN,GAAmB,KAAnB;AACA,eAAO,EACL,GAAGY;AADE,SAAP;AAGD;;AACD,SAAK,YAAL;AAAmB;AACjB,YAAIrB,SAAS,CAACsC,IAAV,KAAmBhB,MAAM,CAACI,OAA9B,EAAuC;AACrCL,UAAAA,KAAK,CAACX,gBAAN,GAAyB,IAAzB;AACAW,UAAAA,KAAK,CAACV,YAAN,GAAqB,gBAArB;AACD,SAHD,MAGO;AACLU,UAAAA,KAAK,CAACV,YAAN,GAAqB,uBAArB;AACD;;AACD,eAAO,EACL,GAAGU,KADE;AAEL,aAAGT,QAAQ,CAACS,KAAK,CAACjB,MAAP,EAAeiB,KAAK,CAACX,gBAArB;AAFN,SAAP;AAID;;AACD;AACE,aAAOW,KAAP;AAxGJ;AA0GD,CA3GD;;AA6GA,OAAO,MAAMkB,cAAc,gBAAG1C,aAAa,EAApC;AACP,OAAO,MAAM2C,cAAc,gBAAG3C,aAAa,EAApC;AAEP,eAAe,SAAS4C,eAAT,OAAuC;AAAA;;AAAA,MAAd;AAAEC,IAAAA;AAAF,GAAc;AACpD,QAAM,CAACrB,KAAD,EAAQsB,OAAR,IAAmB7C,UAAU,CAACiB,MAAD,EAASb,YAAT,CAAnC;AACA,sBACE,QAAC,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAAEmB,MAAAA;AAAF,KAAhC;AAAA,2BACE,QAAC,cAAD,CAAgB,QAAhB;AAAyB,MAAA,KAAK,EAAE;AAAEsB,QAAAA;AAAF,OAAhC;AAAA,gBACGD;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAOD;;GATuBD,e;;KAAAA,e","sourcesContent":["import React, { createContext, useReducer } from \"react\";\nimport allProducts from \"../../Data\";\nimport offerCode from \"../../Offer\";\nimport { sendPrice } from \"../../Offer\";\n\nconst initialState = {\n  allProducts,\n  favorites: [],\n  basket: [],\n  totalPrice: 0,\n  totalPriceAfterOffer: 0,\n  offerPrice: 0,\n  totalPriceFainal: 0,\n  isFavorite: false,\n  isEnterOfferCode: false,\n  offerMessage: \"\"\n};\n\nconst sumPrice = (items, isOffer) => {\n  const totalPrice = items.reduce((totalPrice, product) => {\n    return totalPrice + product.price * product.count;\n  }, 0);\n\n  if (isOffer) {\n    const offerPrice = (totalPrice * offerCode.disCount) / 100;\n    const totalPriceAfterOffer = totalPrice - offerPrice;\n\n    return {\n      totalPrice,\n      offerPrice,\n      totalPriceAfterOffer,\n      ...sumPriceWithSend(totalPrice, offerPrice)\n    };\n  } else {\n    return { totalPrice, ...sumPriceWithSend(totalPrice) };\n  }\n};\n\n// calc Price With shopping cost\nconst sumPriceWithSend = (totalPrice, offerPrice = 0) => {\n  let totalPriceFainal = null;\n\n  if (totalPrice - offerPrice <= 100_000) {\n    totalPriceFainal = totalPrice + sendPrice - offerPrice;\n  } else {\n    totalPriceFainal = totalPrice - offerPrice;\n  }\n\n  return { totalPriceFainal };\n};\n\nconst reduce = (state, action) => {\n  switch (action.type) {\n    case \"ADD_FAVORITE\": {\n      state.allProducts.forEach((product) => {\n        if (product.id === action.payload) {\n          product.isInterest = !product.isInterest;\n          state.favorites = allProducts.filter((product) => product.isInterest);\n          state.isFavorite = true;\n        }\n      });\n      return {\n        ...state\n      };\n    }\n    case \"REMOVE_ALL_FAVORITE\": {\n      state.favorites = [];\n      state.allProducts.forEach((product) => {\n        product.isInterest = false;\n      });\n\n      return {\n        ...state\n      };\n    }\n    case \"ADD_TO_BASKET\": {\n      const hasProduct = state.basket.some(\n        (product) => product.id === action.payload\n      );\n      if (!hasProduct) {\n        const mainItem = state.allProducts.find(\n          (product) => product.id === action.payload\n        );\n        state.basket.push(mainItem);\n      }\n\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    case \"REMOVE_FROM_BASKET\": {\n      const indexDelete = state.basket.findIndex(\n        (product) => product.id === action.payload\n      );\n      state.basket[indexDelete].count = 1;\n      state.basket = state.basket.filter(\n        (product) => product.id !== action.payload\n      );\n\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    case \"INCREASE\": {\n      const indexPlus = state.basket.findIndex(\n        (product) => product.id === action.payload\n      );\n      state.basket[indexPlus].count++;\n\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    case \"DECREASE\": {\n      const indexMinus = state.basket.findIndex(\n        (product) => product.id === action.payload\n      );\n      if (state.basket[indexMinus].count > 1) {\n        state.basket[indexMinus].count--;\n      }\n\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    case \"EMPTY_BASKET\": {\n      state.basket = state.basket.forEach((product) => (product.count = 1));\n      state.basket = [];\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    case \"REMOVE_CLASS\": {\n      state.isFavorite = false;\n      return {\n        ...state\n      };\n    }\n    case \"OFFER_CODE\": {\n      if (offerCode.code === action.payload) {\n        state.isEnterOfferCode = true;\n        state.offerMessage = \"تخفیف اعمال شد\";\n      } else {\n        state.offerMessage = \"کد وارد شده صحیح نیست\";\n      }\n      return {\n        ...state,\n        ...sumPrice(state.basket, state.isEnterOfferCode)\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const ProductContext = createContext();\nexport const ProductDispath = createContext();\n\nexport default function ContextProvider({ children }) {\n  const [state, dispath] = useReducer(reduce, initialState);\n  return (\n    <ProductContext.Provider value={{ state }}>\n      <ProductDispath.Provider value={{ dispath }}>\n        {children}\n      </ProductDispath.Provider>\n    </ProductContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}